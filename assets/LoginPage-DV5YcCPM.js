import{_ as ve,c as I,o as x,a as b,f as be,t as C,F as Z,N as R,O as Se,r as j,i as xe,e as _e,m as J,n as qe,k as je,P as Ie,b as Ce,u as S,g as Oe,l as Re,Q as Le,h as Ee,y as Ne}from"./index-KU8BgGeQ.js";import{s as Y,e as Be,w as $e}from"./index-D6qEvwj7.js";import{F as Ge}from"./FullScreenLoading-BkgUMbe-.js";const Pe=["for"],Fe=["value","type","id","name","placeholder","required"],Ve={key:0,class:"text-red-500"},Ae={__name:"TextInput",props:{modelValue:{type:String,default:""},label:{type:String,default:"姓名"},labelKey:{type:String,default:"key"},type:{type:String,default:"text"},required:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorText:{type:String,default:"格式錯誤"}},emits:["update:input","update:change"],setup(e,{emit:r}){return(t,i)=>(x(),I(Z,null,[b("label",{class:"formControls_label",for:e.labelKey},C(e.label),9,Pe),b("input",{class:"formControls_input",value:e.modelValue,type:e.type,id:e.labelKey,name:e.labelKey,placeholder:"請輸入"+e.label,onInput:i[0]||(i[0]=l=>t.$emit("update:input",l.target.value)),required:e.required,onChange:i[1]||(i[1]=l=>t.$emit("updata:change",e.labelKey))},null,40,Fe),e.error?(x(),I("span",Ve,C(e.errorText),1)):be("",!0)],64))}},Ke=ve(Ae,[["__scopeId","data-v-71ec058e"]]);var E,ee;function ge(){if(ee)return E;ee=1;function e(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}return E=e,E}var N,te;function Ue(){if(te)return N;te=1;var e=typeof R=="object"&&R&&R.Object===Object&&R;return N=e,N}var B,re;function pe(){if(re)return B;re=1;var e=Ue(),r=typeof self=="object"&&self&&self.Object===Object&&self,t=e||r||Function("return this")();return B=t,B}var $,ae;function We(){if(ae)return $;ae=1;var e=pe(),r=function(){return e.Date.now()};return $=r,$}var G,ne;function De(){if(ne)return G;ne=1;var e=/\s/;function r(t){for(var i=t.length;i--&&e.test(t.charAt(i)););return i}return G=r,G}var P,ie;function Me(){if(ie)return P;ie=1;var e=De(),r=/^\s+/;function t(i){return i&&i.slice(0,e(i)+1).replace(r,"")}return P=t,P}var F,oe;function ye(){if(oe)return F;oe=1;var e=pe(),r=e.Symbol;return F=r,F}var V,se;function ze(){if(se)return V;se=1;var e=ye(),r=Object.prototype,t=r.hasOwnProperty,i=r.toString,l=e?e.toStringTag:void 0;function y(a){var s=t.call(a,l),d=a[l];try{a[l]=void 0;var n=!0}catch{}var m=i.call(a);return n&&(s?a[l]=d:delete a[l]),m}return V=y,V}var A,le;function Ze(){if(le)return A;le=1;var e=Object.prototype,r=e.toString;function t(i){return r.call(i)}return A=t,A}var K,ue;function He(){if(ue)return K;ue=1;var e=ye(),r=ze(),t=Ze(),i="[object Null]",l="[object Undefined]",y=e?e.toStringTag:void 0;function a(s){return s==null?s===void 0?l:i:y&&y in Object(s)?r(s):t(s)}return K=a,K}var U,ce;function Qe(){if(ce)return U;ce=1;function e(r){return r!=null&&typeof r=="object"}return U=e,U}var W,de;function Xe(){if(de)return W;de=1;var e=He(),r=Qe(),t="[object Symbol]";function i(l){return typeof l=="symbol"||r(l)&&e(l)==t}return W=i,W}var D,fe;function Je(){if(fe)return D;fe=1;var e=Me(),r=ge(),t=Xe(),i=NaN,l=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function d(n){if(typeof n=="number")return n;if(t(n))return i;if(r(n)){var m=typeof n.valueOf=="function"?n.valueOf():n;n=r(m)?m+"":m}if(typeof n!="string")return n===0?n:+n;n=e(n);var g=y.test(n);return g||a.test(n)?s(n.slice(2),g?2:8):l.test(n)?i:+n}return D=d,D}var M,me;function Ye(){if(me)return M;me=1;var e=ge(),r=We(),t=Je(),i="Expected a function",l=Math.max,y=Math.min;function a(s,d,n){var m,g,T,p,v,h,o=0,u=!1,k=!1,f=!0;if(typeof s!="function")throw new TypeError(i);d=t(d)||0,e(n)&&(u=!!n.leading,k="maxWait"in n,T=k?l(t(n.maxWait)||0,d):T,f="trailing"in n?!!n.trailing:f);function _(c){var w=m,q=g;return m=g=void 0,o=c,p=s.apply(q,w),p}function he(c){return o=c,v=setTimeout(O,d),u?_(c):p}function ke(c){var w=c-h,q=c-o,X=d-w;return k?y(X,T-q):X}function H(c){var w=c-h,q=c-o;return h===void 0||w>=d||w<0||k&&q>=T}function O(){var c=r();if(H(c))return Q(c);v=setTimeout(O,ke(c))}function Q(c){return v=void 0,f&&m?_(c):(m=g=void 0,p)}function we(){v!==void 0&&clearTimeout(v),o=0,m=h=g=v=void 0}function Te(){return v===void 0?p:Q(r())}function L(){var c=r(),w=H(c);if(m=arguments,g=this,h=c,w){if(v===void 0)return he(h);if(k)return clearTimeout(v),v=setTimeout(O,d),_(h)}return v===void 0&&(v=setTimeout(O,d)),p}return L.cancel=we,L.flush=Te,L}return M=a,M}var et=Ye();const z=Se(et),tt={id:"loginPage",class:"bg-yellow"},rt={class:"container loginPage h-screen"},at={class:"side"},nt={class:"formControls_txt"},it=["value"],ot={class:"formControls_btnLink"},st={__name:"LoginPage",setup(e){const r=Le(),t=j(!0),i=j(!1),l=o=>i.value=o,y=xe(()=>[{label:"Email",key:"email",type:"email",required:!0,show:!0},{label:"暱稱",key:"nickname",type:"text",required:!1,show:!t.value},{label:"密碼",key:"password",type:"password",required:!0,show:!0},{label:"再次輸入密碼",key:"passwordCheck",type:"password",required:!1,show:!t.value}]),a=j({email:"",nickname:"",password:"",passwordCheck:""}),s=j({email:!1,nickname:!1,password:!1,passwordCheck:!1}),d=j({email:"格式錯誤",nickname:"格式錯誤",password:"格式錯誤",passwordCheck:"與密碼不符"}),n=()=>{a.value={email:a.value.email,nickname:"",password:"",passwordCheck:""}},m=()=>{l(!0),t.value?Re({email:a.value.email,password:a.value.password}).then(o=>{sessionStorage.setItem("token",o.data?.token),sessionStorage.setItem("nickname",o.data?.nickname),Y({title:"登入成功！"}).then(()=>{a.value={email:"",password:"",nickname:""},r.push("/final-todo-list/to-do-list")})}).catch(o=>{Be({text:o?.response?.data?.message??"請稍後再試",confirmButtonText:"前往註冊",cancelButtonText:"我再想想"}).then(u=>{if(u.isConfirmed){t.value=!1,n();return}})}).finally(()=>l(!1)):Ee({email:a.value.email,password:a.value.password,nickname:a.value.nickname}).then(()=>{Y({title:"註冊成功！",confirmButtonText:"點我登入"}).then(()=>{t.value=!0,n()})}).catch(o=>{$e({title:"註冊失敗！",text:o?.response?.data?.message??"請稍後再試！",confirmButtonText:"重新輸入"}).then(()=>{a.value={email:a.value.email,password:"",nickname:a.value.nickname}})}).finally(()=>l(!1))},g=z((o,u)=>{v(o,u)},300),T=z(o=>{h(o)},300),p=z(()=>{m()},300),v=(o,u)=>{a.value[o]=u.trim()},h=o=>{const u=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/,k=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,20}$/;if(o==="email"){s.value.email=!u.test(a.value.email),s.value.email&&(d.value.email="請輸入正確的 Email 格式");return}if(o==="nickname"){s.value.nickname=a.value.nickname.length<1||a.value.nickname.length>20,s.value.nickname&&(d.value.nickname="暱稱長度需介於1~20字元");return}if(o==="password"){s.value.password=!k.test(a.value.password),s.value.password&&(d.value.password="密碼需包含英文及數字，長度6~20字元");return}if(o==="passwordCheck"&&!t.value){s.value.passwordCheck=a.value.password!==a.value.passwordCheck,s.value.passwordCheck&&(d.value.passwordCheck="兩次密碼不相符，請重新確認");return}};return _e(t,()=>{s.value={nickname:!1,password:!1,passwordCheck:!1},n(),a.value.email!==""&&h("email")}),(o,u)=>{const k=je("RouterLink");return x(),I("div",tt,[J(Ge,{isLoading:i.value},null,8,["isLoading"]),b("div",rt,[b("div",at,[J(k,{to:"/",title:"回到主頁面"},{default:qe(()=>[...u[3]||(u[3]=[b("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""},null,-1)])]),_:1}),u[4]||(u[4]=b("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"},null,-1))]),b("div",null,[b("form",{class:"formControls",onSubmit:u[2]||(u[2]=Ie((...f)=>S(p)&&S(p)(...f),["prevent"]))},[b("h2",nt,C(t.value?"最實用的線上待辦事項服務":"註冊帳號"),1),(x(!0),I(Z,null,Ce(y.value,f=>(x(),I(Z,{key:f.key},[f.show?(x(),Ne(Ke,{key:0,modelValue:a.value[f.key],label:f.label,type:f.key,labelKey:f.key,"onUpdate:input":_=>S(g)(f.key,_),required:"",error:s.value[f.key],errorText:d.value[f.key],"onUpdata:change":S(T)},null,8,["modelValue","label","type","labelKey","onUpdate:input","error","errorText","onUpdata:change"])):be("",!0)],64))),128)),b("input",{class:"formControls_btnSubmit",type:"submit",onClick:u[0]||(u[0]=(...f)=>S(p)&&S(p)(...f)),value:t.value?"登入":"註冊帳號"},null,8,it),b("p",ot,[Oe(C(t.value?"沒":"已")+"有帳號？ ",1),b("a",{onClick:u[1]||(u[1]=f=>t.value=!t.value),class:"text-blue-800 hover:text-blue-500 cursor-pointer"},"點我"+C(t.value?"註冊":"登入"),1)])],32)])])])}}},dt=ve(st,[["__scopeId","data-v-ef285df7"]]);export{dt as default};
