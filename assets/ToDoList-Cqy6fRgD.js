import{_ as I,i as E,r as v,c as f,o as u,a as e,t as _,F as U,b as V,f as $,w as S,q as z,u as y,s as K,v as M,x as b,d as O,y as B,m,n as w,z as R,k as N,A as Z,B as q,G,C as H,j as P,p as W,P as T,E as J,g as C,D as Q,H as X,R as Y}from"./index-BB7fzNFv.js";import{w as D,s as F,e as tt}from"./index-D6qEvwj7.js";import{F as et}from"./FullScreenLoading-NRteca_X.js";const st={key:0,class:"flex flex-col justify-between items-center gap-5"},ot={class:"text-xl font-bold flex-1"},nt={key:1,class:"todoList_item"},at={class:"todoList_label mr-2 cursor-pointer"},lt=["onUpdate:modelValue","onChange"],it={class:"flex-1 items-end justify-between"},rt=["onKeyup","onUpdate:modelValue"],ut={key:1,class:"flex justify-between"},dt={key:0,class:"flex gap-2 text-xl mr-3 pb-4"},ct={__name:"OneList",props:{data:{type:Array,default:[]},listStatus:{type:String,default:"all"}},emits:["update:refresh","update:loading"],setup(L,{emit:k}){const d=L,c=k,i=o=>c("update:loading",o),g=E(()=>{const o=[...d.data].sort((t,x)=>Number(t.status)-Number(x.status));return d.listStatus==="done"?o.filter(t=>t.status):d.listStatus==="now"?o.filter(t=>!t.status):o}),a=v(null),r=v(""),h=o=>{a.value=o.id,r.value=o.content.trim()},l=o=>{const t=(o.content??"").trim();if(t===r.value){r.value="",a.value=null;return}if(!t){D({title:"請填寫內容！",showConfirmButton:!1}),o.content="";return}i(!0),G(o.id,{content:t}).then(()=>{F({title:"更新成功！"}),c("update:refresh")}).finally(()=>{a.value=null,i(!1)})},s=o=>{if(o==null)return"";const t=Number(o);if(Number.isNaN(t))return"";const n=Math.abs(t)<1e12?t*1e3:t,p=new Date(n),j=new Intl.DateTimeFormat("zh-TW",{timeZone:"Asia/Taipei",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(p).replaceAll("/","-"),A=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Taipei",weekday:"short"}).format(p).toLowerCase();return`${j} (${A})`};return(o,t)=>{const x=N("el-icon");return g.value.length===0?(u(),f("div",st,[e("p",ot,"目前尚無"+_(L.listStatus==="done"?"完成":"待辦")+"事項",1),t[0]||(t[0]=e("img",{class:"d-m-n max-h-80",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"},null,-1))])):(u(),f("ul",nt,[(u(!0),f(U,null,V(g.value,n=>(u(),f("li",{key:n.id},[e("label",at,[S(e("input",{class:"todoList_input cursor-pointer","onUpdate:modelValue":p=>n.status=p,type:"checkbox",onChange:p=>{i(!0),y(K)(n.id).then(()=>o.$emit("update:refresh"))}},null,40,lt),[[z,n.status]]),e("div",it,[a.value===n.id?S((u(),f("input",{key:0,type:"text",onKeyup:O(p=>l(n),["enter"]),"onUpdate:modelValue":p=>n.content=p,class:b(["border p-1 rounded-md w-full",{"line-through text-gray-500":n.status}])},null,42,rt)),[[M,n.content]]):(u(),f("div",ut,[e("span",{class:b({"line-through text-gray-500":n.status})},_(n.content),3),e("span",{class:b(["text-[12px] text-gray-600 ml-2",{"line-through text-gray-500":n.status}])},_(s(n.createTime)),3)]))])]),n.status?$("",!0):(u(),f("div",dt,[a.value===null?(u(),B(x,{key:0,title:"編輯",color:"#165DFF",class:"cursor-pointer",onClick:p=>h(n)},{default:w(()=>[m(y(R))]),_:2},1032,["onClick"])):$("",!0),a.value===n.id?(u(),B(x,{key:1,title:"確認",color:"#00C851",class:"cursor-pointer",onClick:p=>l(n)},{default:w(()=>[m(y(Z))]),_:2},1032,["onClick"])):$("",!0),m(x,{title:"刪除",color:"#FF3B30",class:"cursor-pointer",onClick:p=>y(H)(n.id).then(()=>{y(F)({title:"刪除成功！"}).then(()=>o.$emit("update:refresh"))})},{default:w(()=>[m(y(q))]),_:2},1032,["onClick"])]))]))),128))]))}}},pt=I(ct,[["__scopeId","data-v-7a679686"]]),ft={class:"inputBox shrink-0"},mt=["placeholder"],ht={__name:"TodoInput",emits:["update:refresh","update:loading"],setup(L,{emit:k}){const d=k,c=l=>d("update:loading",l),i=v(""),g=["今天要完成的第一件事是…","把腦中的待辦寫下來：","先做最重要的一件事","下一步行動是什麼？（用動詞開頭）","5 分鐘內能完成的小任務","明天的你會感謝現在的什麼？","來一個 25 分鐘番茄鐘任務","先處理正在阻塞你的那一步","讓生活前進 1% 的動作","寫下你一直想做但沒做的事","今天想學的一個小技能","先拿掉一件不必要的事","完成一件讓你有成就感的小事","大腦應該用來創造","要寄出的那封信，先寫標題","清單不求多，先寫一件就好","把大任務切成更小步驟","下一個會議前要完成的事","需要查的資料是…","今天要回覆的訊息是…","先整理桌面 3 分鐘","為今天設定一個小里程碑","列出一個阻礙與第一個解法","這件事需要跟誰確認？","交付前的最後檢查是…","留點時間給自己：寫下放鬆任務","把「也許有一天」改成今天","把重複工作自動化的第一步","今天要勇敢拒絕的一件事","完成後你要怎麼慶祝？"],a=v(""),r=()=>{a.value=g[Math.floor(Math.random()*g.length)]},h=()=>{if(i.value.trim()===""){D({title:"請填寫內容！",showConfirmButton:!1}),i.value="";return}c(!0),J({content:i.value}).then(()=>{i.value="",r(),d("update:refresh"),F({title:"新增成功！"}).then(()=>{}).finally(()=>c(!1))}).catch(l=>{tt({title:"新增失敗",text:l?.response?.data?.message??"請稍後再試！",showCancelButton:!1})}).finally(()=>c(!1))};return P(()=>{r()}),(l,s)=>{const o=N("el-icon");return u(),f("div",ft,[S(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),onKeyup:O(h,["enter"]),placeholder:a.value},null,40,mt),[[M,i.value]]),e("a",{href:"",title:"新增待辦",onClick:T(h,["prevent"]),class:"flex justify-center items-center"},[m(o,{class:"top-[-3px]"},{default:w(()=>[m(y(W))]),_:1})])])}}},_t=I(ht,[["__scopeId","data-v-1586bea3"]]),vt={id:"todoListPage",class:"bg-half flex flex-col"},gt={class:"todo_sm"},xt={class:"container todoListPage flex-1 min-h-0"},yt={class:"todoList_Content flex flex-col h-full min-h-0"},kt={class:"todoList_list flex flex-col flex-1 min-h-0 overflow-hidden"},Ct={class:"todoList_tab shrink-0"},wt=["onClick"],Lt={class:"todoList_items overflow-auto flex-1 min-h-0"},bt={class:"flex justify-end p-3 shadow-[0_-4px_15px_0_rgba(0,0,0,0.1)]"},Tt={class:"my-2"},$t={__name:"ToDoList",setup(L){const k=v(sessionStorage.getItem("nickname")||"Not User"),d=v(!1),c=l=>d.value=l,i=()=>{D({title:"真的要離開嗎？"}).then(l=>{if(l.isConfirmed)c(!0),X().then(()=>{sessionStorage.removeItem("nickname"),sessionStorage.removeItem("token"),Y.push("/final-todo-list/login-page")}).finally(()=>c(!1));else return})},g=[{label:"全部",state:"all",textColor:"text-blue-600"},{label:"待完成",state:"now",textColor:"text-red-600"},{label:"已完成",state:"done",textColor:"text-green-600"}],a=v("all"),r=v([]),h=()=>{c(!0),Q().then(l=>{r.value=l.data.data}).finally(()=>{c(!1)})};return P(()=>{h()}),(l,s)=>{const o=N("RouterLink");return u(),f("div",vt,[m(et,{isLoading:d.value},null,8,["isLoading"]),e("nav",null,[e("h1",null,[m(o,{to:"/",title:"回到主頁面"},{default:w(()=>[...s[5]||(s[5]=[C("ONLINE TODO LIST",-1)])]),_:1})]),e("ul",null,[e("li",gt,[e("a",{href:"",onClick:s[0]||(s[0]=T(()=>{},["prevent"]))},[e("span",null,_(k.value)+"的待辦",1)])]),e("li",null,[e("a",{href:"",onClick:T(i,["prevent"])},"登出 ")])])]),e("div",xt,[e("div",yt,[m(_t,{"onUpdate:refresh":h}),e("div",kt,[e("ul",Ct,[(u(),f(U,null,V(g,t=>e("li",{key:t.state},[e("a",{href:"",onClick:T(x=>a.value=t.state,["prevent"]),class:b([{active:a.value===t.state},t.textColor])},_(t.label),11,wt)])),64))]),e("div",Lt,[m(pt,{data:r.value,"onUpdate:refresh":h,listStatus:a.value,loading:d.value,"onUpdate:loading":s[1]||(s[1]=t=>d.value=t)},null,8,["data","listStatus","loading"])]),e("div",bt,[e("p",Tt,[s[6]||(s[6]=C(" 共有 ",-1)),e("span",{class:"text-blue-600 cursor-pointer",onClick:s[2]||(s[2]=t=>a.value="all")},_(r.value.length),1),s[7]||(s[7]=C(" 項待辦事項，待完成 ",-1)),e("span",{class:"text-red-600 cursor-pointer",onClick:s[3]||(s[3]=t=>a.value="now")},_(r.value.filter(t=>!t.status).length),1),s[8]||(s[8]=C(" 項，已完成 ",-1)),e("span",{class:"text-green-600 cursor-pointer",onClick:s[4]||(s[4]=t=>a.value="done")},_(r.value.filter(t=>t.status).length),1),s[9]||(s[9]=C(" 項待辦事項，加油！ ",-1))])])])])])])}}},Bt=I($t,[["__scopeId","data-v-dbbfa1be"]]);export{Bt as default};
