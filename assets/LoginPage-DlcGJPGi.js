import{_ as be,c as z,o as x,a as p,f as Z,t as S,F as Se,K as j,L as _e,r as C,e as je,m as E,n as Ce,k as qe,y as Y,u as h,g as Ie,l as Oe,M as Re,h as Ee}from"./index-BO8SMRu3.js";import{s as ee,e as Le,w as Ne}from"./index-DdF8-771.js";const Ue=["for"],Ve=["value","type","id","name","placeholder","required"],Be={key:0,class:"text-red-500"},$e={__name:"TextInput",props:{modelValue:{type:String,default:""},label:{type:String,default:"姓名"},labelKey:{type:String,default:"key"},type:{type:String,default:"text"},required:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorText:{type:String,default:"格式錯誤"}},emits:["update:input","update:change"],setup(r,{emit:a}){return(t,e)=>(x(),z(Se,null,[p("label",{class:"formControls_label",for:r.labelKey},S(r.label),9,Ue),p("input",{class:"formControls_input",value:r.modelValue,type:r.type,id:r.labelKey,name:r.labelKey,placeholder:"請輸入"+r.label,onInput:e[0]||(e[0]=n=>t.$emit("update:input",n.target.value)),required:r.required,onChange:e[1]||(e[1]=n=>t.$emit("updata:change",r.labelKey))},null,40,Ve),r.error?(x(),z("span",Be,S(r.errorText),1)):Z("",!0)],64))}},q=be($e,[["__scopeId","data-v-71ec058e"]]);var L,re;function ge(){if(re)return L;re=1;function r(a){var t=typeof a;return a!=null&&(t=="object"||t=="function")}return L=r,L}var N,te;function Ge(){if(te)return N;te=1;var r=typeof j=="object"&&j&&j.Object===Object&&j;return N=r,N}var U,ae;function he(){if(ae)return U;ae=1;var r=Ge(),a=typeof self=="object"&&self&&self.Object===Object&&self,t=r||a||Function("return this")();return U=t,U}var V,ne;function Ke(){if(ne)return V;ne=1;var r=he(),a=function(){return r.Date.now()};return V=a,V}var B,oe;function Pe(){if(oe)return B;oe=1;var r=/\s/;function a(t){for(var e=t.length;e--&&r.test(t.charAt(e)););return e}return B=a,B}var $,ie;function Ae(){if(ie)return $;ie=1;var r=Pe(),a=/^\s+/;function t(e){return e&&e.slice(0,r(e)+1).replace(a,"")}return $=t,$}var G,se;function ke(){if(se)return G;se=1;var r=he(),a=r.Symbol;return G=a,G}var K,le;function Fe(){if(le)return K;le=1;var r=ke(),a=Object.prototype,t=a.hasOwnProperty,e=a.toString,n=r?r.toStringTag:void 0;function c(v){var d=t.call(v,n),m=v[n];try{v[n]=void 0;var o=!0}catch{}var f=e.call(v);return o&&(d?v[n]=m:delete v[n]),f}return K=c,K}var P,ue;function We(){if(ue)return P;ue=1;var r=Object.prototype,a=r.toString;function t(e){return a.call(e)}return P=t,P}var A,ce;function De(){if(ce)return A;ce=1;var r=ke(),a=Fe(),t=We(),e="[object Null]",n="[object Undefined]",c=r?r.toStringTag:void 0;function v(d){return d==null?d===void 0?n:e:c&&c in Object(d)?a(d):t(d)}return A=v,A}var F,de;function Me(){if(de)return F;de=1;function r(a){return a!=null&&typeof a=="object"}return F=r,F}var W,me;function ze(){if(me)return W;me=1;var r=De(),a=Me(),t="[object Symbol]";function e(n){return typeof n=="symbol"||a(n)&&r(n)==t}return W=e,W}var D,fe;function Ze(){if(fe)return D;fe=1;var r=Ae(),a=ge(),t=ze(),e=NaN,n=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,v=/^0o[0-7]+$/i,d=parseInt;function m(o){if(typeof o=="number")return o;if(t(o))return e;if(a(o)){var f=typeof o.valueOf=="function"?o.valueOf():o;o=a(f)?f+"":f}if(typeof o!="string")return o===0?o:+o;o=r(o);var i=c.test(o);return i||v.test(o)?d(o.slice(2),i?2:8):n.test(o)?e:+o}return D=m,D}var M,ve;function He(){if(ve)return M;ve=1;var r=ge(),a=Ke(),t=Ze(),e="Expected a function",n=Math.max,c=Math.min;function v(d,m,o){var f,i,s,b,l,k,w=0,H=!1,y=!1,I=!0;if(typeof d!="function")throw new TypeError(e);m=t(m)||0,r(o)&&(H=!!o.leading,y="maxWait"in o,s=y?n(t(o.maxWait)||0,m):s,I="trailing"in o?!!o.trailing:I);function O(u){var g=f,T=i;return f=i=void 0,w=u,b=d.apply(T,g),b}function we(u){return w=u,l=setTimeout(_,m),H?O(u):b}function ye(u){var g=u-k,T=u-w,Q=m-g;return y?c(Q,s-T):Q}function X(u){var g=u-k,T=u-w;return k===void 0||g>=m||g<0||y&&T>=s}function _(){var u=a();if(X(u))return J(u);l=setTimeout(_,ye(u))}function J(u){return l=void 0,I&&f?O(u):(f=i=void 0,b)}function Te(){l!==void 0&&clearTimeout(l),w=0,f=k=i=l=void 0}function xe(){return l===void 0?b:J(a())}function R(){var u=a(),g=X(u);if(f=arguments,i=this,k=u,g){if(l===void 0)return we(k);if(y)return clearTimeout(l),l=setTimeout(_,m),O(k)}return l===void 0&&(l=setTimeout(_,m)),b}return R.cancel=Te,R.flush=xe,R}return M=v,M}var Xe=He();const pe=_e(Xe),Je={id:"loginPage",class:"bg-yellow"},Qe={class:"container loginPage h-screen"},Ye={class:"side"},er={class:"formControls",action:"index.html"},rr={class:"formControls_txt"},tr=["value"],ar={class:"formControls_btnLink"},nr={__name:"LoginPage",setup(r){const a=Re(),t=C(!0),e=C({email:"",nickname:"",password:"",passwordCheck:""}),n=C({email:!1,nickname:!1,password:!1,passwordCheck:!1}),c=C({email:"格式錯誤",nickname:"格式錯誤",password:"格式錯誤",passwordCheck:"與密碼不符"}),v=()=>{t.value?Oe({email:e.value.email,password:e.value.password}).then(i=>{sessionStorage.setItem("token",i.data?.token),sessionStorage.setItem("nickname",i.data?.nickname),ee({title:"登入成功！"}).then(()=>{e.value={email:"",password:"",nickname:""},a.push("/final-todo-list/to-do-list")})}).catch(i=>{Le({text:i?.response?.data?.message??"請稍後再試",confirmButtonText:"前往註冊",cancelButtonText:"我再想想"}).then(s=>{if(s.isConfirmed){t.value=!1,e.value={email:e.value.email,password:"",nickname:""};return}})}):Ee({email:e.value.email,password:e.value.password,nickname:e.value.nickname}).then(()=>{ee({title:"註冊成功！",confirmButtonText:"點我登入"}).then(()=>{t.value=!0,e.value={email:e.value.email,password:"",nickname:""}})}).catch(i=>{Ne({title:"註冊失敗！",text:i?.response?.data?.message??"請稍後再試！",confirmButtonText:"重新輸入"}).then(()=>{e.value={email:e.value.email,password:"",nickname:e.value.nickname}})})},d=pe((i,s)=>{o(i,s)},300),m=pe(i=>{f(i)},300),o=(i,s)=>{e.value[i]=s},f=i=>{console.log("type",i);const s=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/,b=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,20}$/;if(i==="email"){n.value.email=!s.test(e.value.email),n.value.email&&(c.value.email="請輸入正確的 Email 格式");return}if(i==="nickname"){n.value.nickname=e.value.nickname.length<1||e.value.nickname.length>20,n.value.nickname&&(c.value.nickname="暱稱長度需介於1~20字元");return}if(i==="password"){n.value.password=!b.test(e.value.password),n.value.password&&(c.value.password="密碼需包含英文及數字，長度6~20字元");return}if(i==="passwordCheck"&&!t.value){n.value.passwordCheck=e.value.password!==e.value.passwordCheck,n.value.passwordCheck&&(c.value.passwordCheck="兩次密碼不相符，請重新確認");return}};return je(t,()=>{n.value={nickname:!1,password:!1,passwordCheck:!1},e.value={email:e.value.email,password:"",nickname:"",passwordCheck:""},e.value.email!==""&&f("email")}),(i,s)=>{const b=qe("RouterLink");return x(),z("div",Je,[p("div",Qe,[p("div",Ye,[E(b,{to:"/",title:"回到主頁面"},{default:Ce(()=>[...s[5]||(s[5]=[p("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""},null,-1)])]),_:1}),s[6]||(s[6]=p("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"},null,-1))]),p("div",null,[p("form",er,[p("h2",rr,S(t.value?"最實用的線上代辦事項服務":"註冊帳號"),1),E(q,{modelValue:e.value.email,label:"Email",type:"email",labelKey:"email","onUpdate:input":s[0]||(s[0]=l=>h(d)("email",l)),required:"",error:n.value.email,errorText:c.value.email,"onUpdata:change":h(m)},null,8,["modelValue","error","errorText","onUpdata:change"]),t.value?Z("",!0):(x(),Y(q,{key:0,modelValue:e.value.nickname,label:"您的暱稱",type:"text",labelKey:"nickname","onUpdate:input":s[1]||(s[1]=l=>h(d)("nickname",l)),error:n.value.nickname,errorText:c.value.nickname,"onUpdata:change":h(m)},null,8,["modelValue","error","errorText","onUpdata:change"])),E(q,{modelValue:e.value.password,label:"密碼",type:"password",labelKey:"password","onUpdate:input":s[2]||(s[2]=l=>h(d)("password",l)),required:"",error:n.value.password,errorText:c.value.password,"onUpdata:change":h(m)},null,8,["modelValue","error","errorText","onUpdata:change"]),t.value?Z("",!0):(x(),Y(q,{key:1,modelValue:e.value.passwordCheck,label:"再次輸入密碼",type:"password",labelKey:"passwordCheck","onUpdate:input":s[3]||(s[3]=l=>h(d)("passwordCheck",l)),error:n.value.passwordCheck,errorText:c.value.passwordCheck,"onUpdata:change":h(m)},null,8,["modelValue","error","errorText","onUpdata:change"])),p("input",{class:"formControls_btnSubmit",type:"button",onClick:v,value:t.value?"登入":"註冊帳號"},null,8,tr),p("p",ar,[Ie(S(t.value?"沒":"已")+"有帳號？",1),p("a",{onClick:s[4]||(s[4]=l=>t.value=!t.value),class:"text-blue-800 hover:text-blue-500 cursor-pointer"},"點我"+S(t.value?"註冊":"登入"),1)])])])])])}}},sr=be(nr,[["__scopeId","data-v-a90ec52b"]]);export{sr as default};
